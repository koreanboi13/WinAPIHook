# Проект DLL Инжектора

Этот проект демонстрирует техники внедрения DLL и функциональность хукинга в Windows. Он состоит из двух основных компонентов: DLL-библиотеки, содержащей код для внедрения, и приложения-инжектора, которое управляет процессом внедрения.

## Структура проекта

```
.
├── Dll/                 # Файлы проекта DLL
│   ├── dllmain.cpp     # Точка входа DLL и основная функциональность
│   ├── Hook.cpp        # Реализация хукинга
│   ├── Hook.h          # Объявления хукинга
│   └── SaveStack.asm   # Ассемблерный код для манипуляции стеком
│
└── injector/           # Приложение-инжектор
    ├── main.cpp        # Точка входа основного приложения
    ├── injector.cpp    # Реализация инжектора
    └── injector.h      # Объявления инжектора
```

#### Функциональность хука
Хук предоставляет следующие возможности:
1. **Хукинг функций Windows API**
   - Перехват и модификация системных функций
   - Безопасное сохранение и восстановление оригинального кода

2. **Скрытие файлов**
   - Возможность скрытия файлов в системе
   - Перехват функций работы с файлами
   - Маскировка файлов от системных вызовов

3. **Межпроцессное взаимодействие**
   - Коммуникация через именованные каналы (Named Pipes)
   - Обмен данными между инжектором и хуком
   - Передача команд и параметров в реальном времени

### Инжектор (injector/)
- Управляет процессом внедрения DLL
- Предоставляет пользовательский интерфейс для операций внедрения
- Управляет взаимодействием с процессами и манипуляцией памятью

## Сборка проекта

### Требования
- Visual Studio (рекомендуемая версия: 2019 или новее)
- Windows SDK
- MASM (Microsoft Macro Assembler)

### Шаги сборки
1. Откройте решение в Visual Studio
2. Сначала соберите проект DLL
3. Соберите проект инжектора
4. Убедитесь, что оба исполняемых файла находятся в одной директории при запуске

## Использование

1. Соберите оба проекта
2. Запустите приложение-инжектор
3. Выберите целевой процесс
4. Выберите метод внедрения
5. Выполните внедрение

### Примеры использования

Программа поддерживает следующие форматы команд:

1. **Хукинг функции по имени процесса:**
   ```
   main.exe -name mspaint.exe -func CloseHandle
   ```
   Это перехватит функцию CloseHandle в процессе mspaint.exe

2. **Хукинг функции по PID процесса:**
   ```
   main.exe -pid 20812 -func CloseHandle
   ```
   Это перехватит функцию CloseHandle в процессе с ID 20812

3. **Скрытие файла в процессе:**
   ```
   main.exe -name powershell.exe -hide hideME.txt
   ```
   Это скроет файл hideME.txt от процесса powershell.exe


### Примечания по использованию

- Для хукинга функций необходимо указать либо имя процесса (-name), либо его PID (-pid)
- Для скрытия файлов необходимо указать имя процесса и путь к файлу

  ```
  main.exe -name mspaint.exe -func unhook CloseHandle
  ```

